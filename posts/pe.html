<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Project Euler solutions</title>
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Project Euler solutions</h1>
<div id="outline-container-orgacb28d9" class="outline-2">
<h2 id="orgacb28d9">Disclaimer</h2>
<div class="outline-text-2" id="text-orgacb28d9">
<p>
This file contains my BQN solutions to some of the problems in <a href="https://projecteuler.net/">Project Euler</a>.
It is discouraged to share them, but I very much dislike writing throw-away code,
and that's why they are here. I will not blog about it, but I am happy to discuss
them with anyone who is interested.
</p>
</div>
</div>
<div id="outline-container-org2b71d72" class="outline-2">
<h2 id="org2b71d72">Problem 1</h2>
<div class="outline-text-2" id="text-org2b71d72">
<div class="org-src-container">
<pre class="src src-bqn">E1 â† +Â´(âˆ¨Â´0=5â€¿3|&lt;)âŠ¸/
</pre>
</div>

<div class="org-src-container">
<pre class="src src-bqn">E1 â†•1e3
</pre>
</div>
</div>
</div>
<div id="outline-container-org736ca06" class="outline-2">
<h2 id="org736ca06">Problem 2</h2>
<div class="outline-text-2" id="text-org736ca06">
<p>
Estimate the upper bound with Binet's formula.
</p>

<div class="org-src-container">
<pre class="src src-bqn">E2 â† {+Â´(Â¬2âŠ¸|)âŠ¸/{âŠ‘Â¨+`âˆ˜âŒ½âŸ(â†•ğ•©)â†•2}(âŒˆ0.5+ğ•©âŠ¸Ã—Ã·â—‹(â‹†â¼)2Ã·Ëœ1âŠ¸+)âˆš5}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-bqn">E2 4e6
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf1945d1" class="outline-2">
<h2 id="orgf1945d1">Problem 3</h2>
<div class="outline-text-2" id="text-orgf1945d1">
<p>
A brute force attempt, in which I got lucky. We create a primes table, and then check:
</p>

<div class="org-src-container">
<pre class="src src-bqn">p â† Â¬âˆ˜âˆŠâŸœ(â¥ŠÃ—âŒœËœ)âŠ¸/2â†“â†•1e4
{ğ•©=Ã—Â´fâ†p/Ëœ0=p|&lt;ğ•© ? âŒˆÂ´f; @}600851475143
</pre>
</div>

<p>
Provided the size of the input, a much reasonable approach is trial division. We can
achieve this with the following tacit function:
</p>

<div class="org-src-container">
<pre class="src src-bqn">E3 â† âŠ¢Â´(0=|)â—¶âŸ¨+âŸœ2âŠ¸â‹ˆ, âŠ£â‹ˆÃ·ËœâŸ©Â´â€¢_while_(Ã—Ëœâˆ˜âŠ£âŠ¸&lt;Â´)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-bqn">E3 3â€¿600851475143 
</pre>
</div>

<p>
Explanation: since the number is odd, we can start with 3. While the current
divisor is less than the square root of the current number, we check if it
divides the number. If it does, we divide the number by the divisor.
If it doesn't, we increment the divisor by 2 (to consider only odd factors).
This works because a composite number must have a prime factor less
than or equal to its square root.
</p>
</div>
</div>
<div id="outline-container-orgac8f85f" class="outline-2">
<h2 id="orgac8f85f">Problem 4</h2>
<div class="outline-text-2" id="text-orgac8f85f">
<p>
Anything other than brute force here? A little tacit function:
</p>

<div class="org-src-container">
<pre class="src src-bqn">E4 â† âŒˆÂ´Â·(âŒ½âŠ¸â‰¡â€¢Fmt)Â¨âŠ¸/Â·â¥ŠÃ—âŒœËœ
</pre>
</div>

<div class="org-src-container">
<pre class="src src-bqn">E4 900+â†•101
</pre>
</div>

<p>
This runs in 5 ms with the optimization of searching only in the 900's.
</p>
</div>
</div>
<div id="outline-container-orgae0331e" class="outline-2">
<h2 id="orgae0331e">Problem 5</h2>
<div class="outline-text-2" id="text-orgae0331e">
<p>
That felt almost trivial.
</p>

<div class="org-src-container">
<pre class="src src-bqn">E5 â† â€¢math.LCMÂ´
</pre>
</div>

<div class="org-src-container">
<pre class="src src-bqn">E5 1+â†•20
</pre>
</div>
</div>
</div>
<div id="outline-container-org864e633" class="outline-2">
<h2 id="org864e633">Problem 6</h2>
<div class="outline-text-2" id="text-org864e633">
<p>
Yeah well, what can I say, I love this identity:
</p>

<div class="org-src-container">
<pre class="src src-bqn">E6 â† Ã—ËœâŠ¸(+Â´Ã—-âŠ£)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-bqn">E6 1+â†•100
</pre>
</div>

<p>
In fact, I was terribly stupid. There are closed form solutions for the sum
of the first \(n\) integers and its squares (remember induction?). So after
squaring the former, subtracting the latter and simplifying we get this constant
time solution:
</p>

<div class="org-src-container">
<pre class="src src-bqn">12Ã·ËœÃ—Â´âŸ¨âŠ¢, -âŸœ1, +âŸœ1, 2+3âŠ¸Ã—âŸ©{ğ•ğ•©}Â¨100
</pre>
</div>

<p>
Quite a few characters more, though.
</p>
</div>
</div>
<div id="outline-container-orgaf8719e" class="outline-2">
<h2 id="orgaf8719e">PE7</h2>
<div class="outline-text-2" id="text-orgaf8719e">
<p>
The idea here is to use Eratosthenes' sieve with a correct upper bound, which we get
thanks to Rosser's <a href="https://en.wikipedia.org/wiki/Prime-counting_function#Inequalities">theorem</a>:
</p>

<div class="org-src-container">
<pre class="src src-bqn">E7 â† {
  Sieve â† 2âŠ¸â†“{ğ”½/(ğ•©â¥Š1)âŠ‘â—¶âŠ¢â€¿{â†•âˆ˜âŒˆâŒ¾((ğ•¨Ã—ËœâŠ¸+ğ•¨Ã—âŠ¢)â¼)âˆ˜â‰ âŠ¸{0Â¨âŒ¾(ğ•¨âŠ¸âŠ)ğ•©}ğ•©}Â´âŒ½ğ”½â†•âŒˆâˆšğ•©}
  Rosser â† âŒˆâ‹†â¼{ğ”½âˆ˜ğ”½âŠ¸+âŸœğ”½âŠ¸Ã—}
  (-âŸœ1âŠ‘Sieveâˆ˜Rosser) ğ•©
}
</pre>
</div>

<p>
Which evaluates:
</p>

<div class="org-src-container">
<pre class="src src-bqn">E7 1e4+1
</pre>
</div>

<p>
As a bonus, here is a comparison of Eratosthenes' sieves implementations:
</p>

<div class="org-src-container">
<pre class="src src-bqn">S1 â† 2âŠ¸â†“{ğ”½/(ğ•©â¥Š1)âŠ‘â—¶âŠ¢â€¿{â†•âˆ˜âŒˆâŒ¾((ğ•¨Ã—ËœâŠ¸+ğ•¨Ã—âŠ¢)â¼)âˆ˜â‰ âŠ¸{0Â¨âŒ¾(ğ•¨âŠ¸âŠ)ğ•©}ğ•©}Â´âŒ½ğ”½â†•âŒˆâˆšğ•©}
S2 â† 2âŠ¸â†“{ğ”½/(ğ•©â¥Š1)âŠ‘â—¶âŠ¢â€¿{ğ•©&gt;(â‰ ğ•©)â†‘/â¼â†•âˆ˜âŒˆâŒ¾((ğ•¨Ã—ËœâŠ¸+ğ•¨Ã—âŠ¢)â¼)â‰ ğ•©}Â´âŒ½ğ”½â†•âŒˆâˆšğ•©}
S3 â† 2âŠ¸â†“{ğ”½/(ğ•©â¥Š1)âŠ‘â—¶âŸ¨âŠ¢, âŠ¢&gt;Ã—Ëœâˆ˜âŠ£âŠ¸â¥ŠâŸœ0Â»â‰ âˆ˜âŠ¢â¥Šâ†‘âŸœ1âŸ©Â´âŒ½ğ”½â†•âŒˆâˆšğ•©}
S1â€¿S2â€¿S3 {ğ•â€¢_timedğ•¨}âŒœËœ10â‹†3â€¿5â€¿7â€¿8â€¿9
</pre>
</div>
</div>
</div>
<div id="outline-container-org76e8f0b" class="outline-2">
<h2 id="org76e8f0b">PE8</h2>
<div class="outline-text-2" id="text-org76e8f0b">
<p>
A simple windowed reduction:
</p>

<div class="org-src-container">
<pre class="src src-bqn">E8 â† âŒˆÂ´Â·(Ã—Â´âŠ¢-@+48Ë™)Ë˜13âŠ¸â†•
</pre>
</div>

<p>
Boom:
</p>

<div class="org-src-container">
<pre class="src src-bqn">E8 "7316717653133062491922511967442657474235534919493496983520312774506326239578318016984801869478851843858615607891129494954595017379583319528532088055111254069874715852386305071569329096329522744304355766896648950445244523161731856403098711121722383113622298934233803081353362766142828064444866452387493035890729629049156044077239071381051585930796086670172427121883998797908792274921901699720888093776657273330010533678812202354218097512545405947522435258490771167055601360483958644670632441572215539753697817977846174064955149290862569321978468622482839722413756570560574902614079729686524145351004748216637048440319989000889524345065854122758866688116427171479924442928230863465674813919123162824586178664583591245665294765456828489128831426076900422421902267105562632111110937054421750694165896040807198403850962455444362981230987879927244284909188845801561660979191338754992005240636899125607176060588611646710940507754100225698315520005593572972571636269561882670428252483600823257530420752963450"
</pre>
</div>
</div>
</div>
</div>
</body>
</html>
