# -*- eval: (face-remap-add-relative 'default '(:family "BQN386 Unicode" :height 180)); -*-
#+TITLE: Coding in Advent
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="assets/style.css"/>
#+HTML_HEAD: <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
#+HTML_HEAD: <style>
#+HTML_HEAD:   #table-of-contents > h2 { display: none; }
#+HTML_HEAD:   #text-table-of-contents > ul { 
#+HTML_HEAD:     display: grid;
#+HTML_HEAD:     grid-template-columns: repeat(5, 1fr);
#+HTML_HEAD:     gap: 10px;
#+HTML_HEAD:     list-style: none;
#+HTML_HEAD:     padding: 0;
#+HTML_HEAD:     margin: 0;
#+HTML_HEAD:   }
#+HTML_HEAD:   #table-of-contents > ul > li {
#+HTML_HEAD:     text-align: center;
#+HTML_HEAD:   }
#+HTML_HEAD: </style>

#+TOC: headlines 1 :ignore-title t

** Foreword
:PROPERTIES:
:UNNUMBERED: notoc
:END:

Welcome to my [[https://adventofcode.com/2024][Advent of Code]] solutions for the year 2024. Please read the puzzles' descriptions upstream
to get more context. These definitions and imports are shared by the various puzzles:

#+begin_src bqn :tangle ./bqn/aoc24.bqn
  Xor â† {s32 â† 2â‹†31 â‹„ ğ•¨(s32âŠ¸Ã—âŠ¸+Â´32â€¢bit._xorâ—‹(s32âŠ¸(âŒŠâˆ˜Ã·Ëœâ‹ˆ|)))ğ•©}
  Split â† (Â¬-ËœâŠ¢Ã—Â·+`Â»âŠ¸>)âˆ˜â‰ âŠ”âŠ¢
  SplitF â† {((Â¯1+âŠ¢Ã—Â·+`Â»âŠ¸<)Â¬ğ•¨âŠ¸â‰¡Â¨ğ•©)âŠ”ğ•©}
  Ints â† {â€¢ParseFloatÂ¨((Â¯1+âŠ¢Ã—Â·+`Â»âŠ¸<)ğ•©âˆŠğ•¨âˆ¾'0'+â†•10)âŠ”ğ•©}
  Input â† {"../supp/aoc/2024/"âˆ¾".inp"âˆ¾Ëœâ€¢Fmtğ•©}
  _fp â† {ğ”½âˆ˜âŠ¢âŸâ‰¢âŸœğ”½_ğ•£âˆ˜âŠ¢âŸâ‰¢âŸœğ”½ğ•©}
  _cnu â† {ğ•©{ğ•ğ•¨}Â¨ğ”½âŸ¨Â»,Â»Ë˜,Â«,Â«Ë˜âŸ©}
  _is â† {
   âˆ¾âŸ¨"Computed ", â€¢Fmt(ğ”½ğ•©).eins, " and ",
      â€¢Fmt(ğ”½ğ•©).zwei, " in ", â€¢Fmt 10ğ”½â€¢_timedğ•©, "s"âŸ©
  }
#+end_src

#+RESULTS:
: (1-modifier block)

The =_is= modifier prints the solution for the two parts, and a 10-runs average total runtime (including parsing).
For reference, these are my CPU's specs:

#+begin_export html
<details>
<summary>inxi -C</summary>
<br/>
#+end_export

#+begin_src
  CPU:
    Info: 8-core model: AMD Ryzen 7 PRO 7840U w/ Radeon 780M Graphics bits: 64
      type: MT MCP cache: L2: 8 MiB
    Speed (MHz): avg: 2048 min/max: 400/5132
#+end_src

#+begin_export html
</details>
#+end_export

You can compare my solutions with those of other BQN programmers in the [[https://mlochbaum.github.io/BQN/community/aoc.html][retrospective]] page.

** I

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  I â† {
    inp â† >(â€¢ParseFloatÂ¨' 'âŠ¸Split)Â¨â€¢FLines Inputğ•©
    eins â‡ +Â´|-Â´Ë˜âˆ§Ë˜âŒ¾â‰inp
    zwei â‡ {+Â´ğ•¨Ã—-Â´(âˆ§ğ•©)âŠ¸â‹Â¨(âŠ¢â‹ˆ-âŸœ1)ğ•¨}Â´<Ë˜â‰inp
  }
  I _is 1
#+end_src

#+RESULTS:
: "Computed 2057374 and 23177084 in 0.0002433342s"

** II

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  II â† {
    inp â† (-Â´Ë˜Â·2âŠ¸â†•Â·â€¢ParseFloatÂ¨' 'âŠ¸Split)Â¨â€¢FLines Inputğ•©
    Pâ€¿Q â† âŸ¨3â‰¥âŒˆÂ´âˆ˜|, â‰ =Â·|+Â´âˆ˜Ã—âŸ©
    F1â€¿F2â€¿F3 â† Pâ€¿Pâ€¿Q {ğ•âˆ§ğ•}Â¨ âŸ¨Q, 1=â‰ -Â·|Â·+Â´Ã—, 1=Â·+Â´3>|âŸ©   
    eins â‡ +Â´F1Â¨inp
    zwei â‡ eins + {aâ€¿bâ€¿ab: ab-Ëœb+a} âŸ¨F2, F3, F2âˆ§F3âŸ© {â‰ ğ•Â¨âŠ¸/ğ•©}Â¨ <(Â¬F1Â¨)âŠ¸/inp
  }
  II _is 2
#+end_src

#+RESULTS:
: "Computed 483 and 528 in 0.0006116174s"

** III

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  III â† {
    mem â† â€¢FChars Inputğ•©
    prg â† mem/Ëœ1=Ã—âˆ˜+`2Ã—-Â´"do()"â€¿"don't()"(â‰¢âˆ˜âŠ¢â†‘â·)Â¨<mem
    mulâ€¿cmd â† {(12â†‘â†“âŸœğ•©)Â¨4+/"mul("(â‰¢âˆ˜âŠ¢â†‘â·)ğ•©}Â¨memâ€¿prg
    C â† {
      lâ€¿râ†âŠ‘âŠ0Â¨1(â†‘â‹ˆâ†“)','Splitğ•©
      lÃ—â—‹â€¢ParseFloatâŠ0 (âˆ¨Â´âŠ0')'âŠ¸=)â—¶âŸ¨0, âŠ‘')'âŠ¸SplitâŸ©r
    }
    einsâ€¿zwei â‡ (+Â´CÂ¨)Â¨ mulâ€¿cmd
  }
  III _is 3
#+end_src

#+RESULTS:
: "Computed 165225049 and 108830766 in 0.0008441142s"

** IV

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  IV â† {
    inp â† >â€¢FLines Input ğ•©
    tâ€¿ts â† âŸ¨"XMAS"â€¿"SAMX", "MSAMS"â€¿"SMASM"â€¿"SSAMM"â€¿"MMASS"âŸ©
    eins â‡ +Â´+Â´âˆ˜â¥ŠÂ¨t â·âŒœ{âŸ¨+Â´ğ•¨ğ”½<ğ•©, +Â´ğ•¨ğ”½<â‰ğ•©, âˆ¾+Ëğ•¨ğ”½ğ”¾ğ•©, âˆ¾+Ëğ•¨ğ”½ğ”¾âŒ½ğ•©âŸ©}(âŠ¢âŠ”ËœÂ·+âŒœÂ´â†•Â¨âˆ˜â‰¢) inp
    xm â† âŒ½Ë˜âŠ¸âˆ¨=âŒœËœâ†•3 â‹„ zwei â‡ +Â´â¥Š{tsâ‰¡Â¨<xm/â—‹â¥Šğ•©}â‰2 3â€¿3â†•inp
  }
  IV _is 4
#+end_src

#+RESULTS:
: "Computed 2397 and 1824 in 0.0044790454s"

** V

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  V â† {
    pâ€¿r â† ",|" â€¢ParseFloatâš‡1âˆ˜(SplitÂ¨)Â¨ 1â†“(âˆ§`âŠ¸+âŸ¨âŸ©âŠ¸â‰¢Â¨)âŠ¸âŠ” â€¢FLines Inputğ•©
    M â† (â’âˆŠâŸœ(>r)âˆ˜â‹ˆâŒœËœ)Â¨âŠÂ¨âŠ¢
    gâ€¿b â† pâŠ”Ëœâˆ=+Â´Ë˜ p (2=Â·+Â´âˆ˜â¥Š=âŒœ)â—¶0â€¿{ğ•©(âŠ£â‰¡âŠ¢/ËœÂ·+Ë=âŒœ)ğ•¨?1;âˆ}âŒœ r
    einsâ€¿zwei â‡ (+Â´(âŠ¢âŠ‘ËœÂ·âŒŠ2Ã·Ëœâ‰ )Â¨)Â¨ gâ‹ˆM b
  }
  V _is 5
#+end_src

#+RESULTS:
: "Computed 6242 and 5169 in 0.2089791522s"

** VI

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  VI â† {
    hm â† (â†•âˆ˜â‰¢â€¢HashMapâ—‹â¥ŠâŠ¢) inp â† >â€¢Flines Inputğ•©
    g â† âŠ‘/â—‹â¥ŠâŸœ(â†•â‰¢)'^'= inp â‹„ r â† âŸ¨Â¯1, 0âŸ©â€¿âŸ¨0, 1âŸ©â€¿âŸ¨1, 0âŸ©â€¿âŸ¨0, Â¯1âŸ©
    Sym â† {ğ•Šm: s â† â€¢HashMapËœâŸ¨âŸ©
      (s.Keys@) â‹ˆ s.Has {ğ•Špâ€¿d:
        s.SetËœpâ€¿d â‹„ '#'=â—¶{ğ•Š:dâ‹ˆËœp+dâŠ‘r}â€¿{ğ•Š:pâ‹ˆ4|d+1} m.GetâŠ@ p+dâŠ‘r
      }â€¢_while_{ğ•Šğ•©: (m.HasâŠ‘ğ•©) âˆ§ Â¬s.Hasğ•©} gâ€¿0
    }
    einsâ€¿zwei â‡ (â‰ â‹ˆÂ·+Â´{ğ•©hm.Set'#' â‹„ (ğ•©hm.Set'.')âŠ¢âŠ¢Â´Sym hm}Â¨) â·âŠâ‰>âŠ‘Sym hm
  }
  VI _is 6
#+end_src

#+RESULTS:
: "Computed 5444 and 1946 in 11.5659486128s"

** VII

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  VII â† {
    inp â† (âŠ‘âŠ¸â‹ˆâ—‹(â€¢ParseFloatÂ¨' 'âŠ¸Split)Â´':'âŠ¸Split)Â¨â€¢FLines Inputğ•©
    C â† âŠ¢+âŠ£Ã—10âŠ¸â‹†âŸœ(âŒŠ1+10â‹†â¼1âŒˆ|)
    eins â‡ +Â´{âŠ‘ğ•¨âˆŠ(+âˆ¾Ã—)Â´âŒ½ğ•©?ğ•¨;0}Â´Â¨ inp
    zwei â‡ +Â´{âŠ‘ğ•¨âˆŠ(CËœâˆ¾+âˆ¾Ã—)Â´âŒ½ğ•©?ğ•¨;0}Â´Â¨ inp
  }
  VII _is 7
#+end_src

#+RESULTS:
: "Computed 6231007345478 and 333027885676693 in 0.0148443502s"

** VIII

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  VIII â† {
    n â† â‰ âŠ‘inpâ€¿ant â† (âŠ¢â‹ˆ1â†“â·âˆ˜â¥Š)>â€¢FLines Inputğ•©
    _tcd â† {(ğ•¨âŠ¸Ã—-(ğ•¨-1)Ã—âŠ£)âŒœËœâŠ¸ğ”½/â—‹â¥ŠâŸœ(â†•â‰¢)ğ•©}
    eins â‡ +Â´(âˆ§Â´â‰¥âŸœ0âˆ§<âŸœn)Â¨â·âˆ¾ 2 (â¥Šâˆ˜âŠ£/ËœÂ·Â¬â¥ŠâŠ¸âˆŠ)_tcdÂ¨ ant=<inp
    zwei â‡ +Â´(âˆ§Â´â‰¥âŸœ0âˆ§<âŸœn)Â¨â·âˆ¾âˆ¾ (â†•n) â¥Šâˆ˜âŠ£_tcdÂ¨âŒœ<ant=<inp
  }
  VIII _is 8
#+end_src

#+RESULTS:
: "Computed 291 and 1015 in 0.0386348246s"

** IX

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  IX â† {
     fâ€¿s â† <Ë˜â‰â†‘â€¿2â¥Šâ€¢ParseFloatâˆ˜â‹ˆÂ¨âŠ‘â€¢FLines Inputğ•©
     m â† Â¯1=d â† âˆ¾â¥Šâ‰ds â† (âŠ”Ëœ/f)â‰Â¯1Â¨âˆ˜â†•Â¨sm â† s
     ds âŠ£ {nğ•Šcf: (p<n)âˆ§(â‰ f)>pâ†âŠ‘1âŠËœcfâ‰ âŠ¸â‰¤sm?
       ds({cfÂ«ğ•©}âŒ¾(1â€¿pâŠ¸âŠ‘){Â¯1Â¨ğ•©}âŒ¾(0â€¿nâŠ¸âŠ‘))â†© â‹„ @âŠ£sm{ğ•©-â‰ cf}âŒ¾(pâŠ¸âŠ‘)â†©; @
     }Â´Ë˜(âŠ¢â‰Ë˜ËœÂ·âŒ½âŠ’Ëœ)âŒ½âŠds
     eins â‡ {+Â´(âŠ¢Ã—â†•âˆ˜â‰ )(ğ•©-Ëœâ‰ d)â†‘(ğ•©â†‘âŒ½/f)âŒ¾(mâŠ¸/)d}+Â´s
     zwei â‡ +Â´(âŠ¢Ã—â†•âˆ˜â‰ )(âŠ¢Ã—Â¯1âŠ¸â‰ )âˆ¾â¥Šâ‰{ğ•ŠâŸ¨âŸ©:ğ•©;(âŒ½âˆ˜âŠ£âˆ¾âŠ¢)Â´ğ•©âŠ”Ëœğ•©=Â¯1}Â¨âŒ¾(1âŠ¸âŠ)ds
  }
  IX _is 9
#+end_src

#+RESULTS:
: "Computed 6378826667552 and 6413328569890 in 0.008265096s"

** X

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  X â† {
    inp â† >'0'-Ëœâ€¢FLines Inputğ•©
    I â† {(ğ•¨âŠ¸=/â—‹â¥ŠâŸœ(â†•â‰¢)âŠ¢)ğ•©}
    P â† {(4/â‰â‰¢inp)(âŠ¢/ËœÂ·âˆ§Â´Ë˜>âˆ§0âŠ¸â‰¤)>âŸ¨Â¯1â€¿0, 0â€¿1, 1â€¿0, 0â€¿Â¯1âŸ©+<ğ•©}
    BFS â† {
      vâ€¿r â† â€¢HashMap{âŸ¨ğ•©ğ”½â—‹â‹ˆ@, ğ”½ËœâŸ¨âŸ©âŸ©}ğ•©
      (r.Count@) âŠ£ 1âŠ¸â†“âˆ˜{9=âŠ‘âŠ‘ğ•© ? ğ•©âŠ£@r.SetËœâŠ¢Â´âŠ‘ğ•©; hâ€¿câ†âŠ‘ğ•©
        ğ•©âˆ¾@âŠ¸â‰¢Â¨âŠ¸/â¥Š{(h=1-Ëœğ•©âŠ‘inp)âˆ§Â¬v.Hasğ•©}â—¶âŸ¨@âŸ©â€¿{@v.SetËœğ•©â‹„â‹ˆğ•©â‹ˆËœh+1}Ë˜P c
      }â€¢_while_{ğ•Š:0â‰ â‰ ğ•©} â‹ˆ0â€¿ğ•©
    }
    DP â† {
     dpm â† (ğ•©=9)ğ•©{h ğ”½_ğ•£ ct: ctâŠ£{ct(+Â´{h=1-Ëœğ•©âŠ‘inp?ğ•©âŠ‘ct;0}Ë˜Pğ•©)âŒ¾(ğ•©âŠ¸âŠ‘)â†©}Â¨h Iğ•—}Â´â†•9
     +Â´â¥Š (ğ•©=0) Ã— dpm
    }
    AMP â† {
      am â† (1=-âŒœËœâ¥Šğ•©)âˆ§1=+Â´âˆ˜|âˆ˜-âŒœËœâ¥Šâ†•â‰¢ğ•©
      +Â´â¥Š(0=â¥Šğ•©)/âŒ¾â‰(9=â¥Šğ•©)/{ğ•©ğ•¨âŠ¸ğ•ŠâŸâ‰¢ğ•¨+ğ•¨+Ëâˆ˜Ã—â‰1â€¿âˆğ•©}Ëœam
    }
    eins â‡ +Â´BFSÂ¨ 0 I inp
    zwei â‡ DP inp
  }
  X _is 10
#+end_src

#+RESULTS:
: "Computed 776 and 1657 in 0.0073447794s"

#+begin_export html
<details>
<summary>Commentary</summary>
#+end_export

For this problem I have included additional functions to solve it in an array way using the
powers of the adjacency matrix. This method is unfortunately slower than simple dynamic programming.

#+begin_export html
</details>
#+end_export

** XI

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XI â† {
    inp â† â€¢ParseFloatÂ¨' 'SplitâŠ‘â€¢Flines Inputğ•© â‹„ m â† â€¢HashMapËœâŸ¨âŸ©
    B â† {
      m.Hasğ•¨â€¿ğ•© ? m.Getğ•¨â€¿ğ•©;
      Â·ğ•Š0: 1;      
      0ğ•Šğ•©: ğ•©{ğ•© âŠ£ ğ•¨m.Setğ•©}1ğ•Šğ•©-1;
      eğ•Šc: lâ€¿r â† e (âŒŠâˆ˜Ã·â‹ˆ|Ëœ) 10â‹†âŒŠ2Ã·Ëœd â† âŒŠ1+10â‹†â¼e 
      {ğ•©âŠ£eâ€¿c m.Setğ•©} ğ•Š{0=ğ•© ? (lâŠ¸ğ”½+râŠ¸ğ”½)c-1; (2024Ã—e)ğ”½c-1} 2|d
    }
    zwei â‡ +Â´inp BÂ¨ 75
    eins â‡ +Â´inp BÂ¨ 25
  }
  XI _is 11
#+end_src

#+RESULTS:
: "Computed 199982 and 237149922829154 in 0.0604116584s"

** XII

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XII â† {
    nâ€¿inp â† â‰ âŠ¸â‹ˆ>â€¢FLines Inputğ•©
    sfâ€¿spâ€¿sc â† âŸ¨Â»Ë˜, Â», Â«Ë˜, Â«âŸ©â€¿âŸ¨0â€¿Â¯1, Â¯1â€¿0, 0â€¿1, 1â€¿0âŸ©â€¿âŸ¨1â€¿0, 1â€¿2, 3â€¿0, 3â€¿2âŸ©
    mnâ€¿mp â† (âˆ¾Â¨Â´â‹ˆÂ·+Â´Â¬) inp<âŠ¸=nud â† sf{ğ•ğ•©}Â¨<inp
    mc â† +Â´sc{hvâ†(sfâŠ‘ËœâŠ¢Â´ğ•¨){ğ”½}âŠ‘hâ€¿vâ†ğ•¨âŠnud â‹„ ((ğ•©â‰ h)âˆ§ğ•©â‰ v)âˆ¨(ğ•©â‰ hv)âˆ§(ğ•©=v)âˆ§ğ•©=h}Â¨<inp
    BFS â† {
      +Â´{ğ•©âŠ‘v?0; v 1âŒ¾(ğ•©âŠ¸âŠ‘)â†© â‹„ aâ€¿pâ€¿c â† 0â€¿0â€¿0
        1âŠ¸â†“âˆ˜{ğ•Š: hâ†âŠ‘ğ•© â‹„ a+â†©1 â‹„ p+â†©hâŠ‘mp â‹„ c+â†©hâŠ‘mc
          ğ•©âˆ¾{ğ•©âŠ£v 1Â¨âŒ¾(ğ•©âŠ¸âŠ‘)â†©}{ğ•©/Ëœ(0=ğ•©âŠ‘âŠâˆÂ¨<v)âˆ§(hâŠ‘mn)âˆ§(âˆ§Â´â‰¥âŸœ0âˆ§<âŸœn)Â¨ğ•©}sp+<h
        }â€¢_while_{ğ•Š: 0<â‰ ğ•©} â‹ˆğ•© â‹„ aÃ—pâ€¿c}Â¨â¥Šâ†•â‰¢ v â† 0Â¨ğ•©
    }
    einsâ€¿zwei â‡ BFS inp
  }
  XII _is 12
#+end_src

#+RESULTS:
: "Computed 1473620 and 902620 in 0.0179634179s"

** XIII

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XIII â† {
    âˆ˜â€¿3â€¿2â¥Šâˆ¾IntsÂ¨âŸ¨âŸ©âŠ¸â‰¢Â¨âŠ¸/â€¢FLines Input ğ•©
    C â† (-Â´Ã—âŸœâŒ½Ë){ğ•¨ğ”½_ğ•£[a,b,c]: (ğ”½Ã·Ëœ(ğ•¨+c)âŒ¾âŠâ‹ˆâ—‹ğ”½(ğ•¨+c)âŒ¾(âŠâŒ½))aâ‰b} 
    einsâ€¿zwei â‡ {+Â´â¥Š3â€¿1Ã—â‰1(âˆ§Â´âŒŠâŠ¸=)Ë˜âŠ¸/ğ•©âŠ¸CË˜inp}Â¨ 0â€¿1e13
  }
  XIII _is 13
#+end_src

#+RESULTS:
: "Computed 480 and 875318608908 in 0.0003234552s"

** XIV

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XIV â† {
    sm â† 0â¥ŠËœs â† 101â€¿103 â‹„ inp â† 2â€¿2âŠ¸â¥ŠË˜>'-'âŠ¸IntsÂ¨â€¢FLines Inputğ•©
    Q â† {ğ•Šr: Ã—Â´+Â´âˆ˜â¥ŠÂ¨0â€¿2â€¿6â€¿8âŠâ¥Š(({/ğ•©âˆ¾1âˆ¾ğ•©}Â·âŒŠÃ·âŸœ2)Â¨s)âŠ”+Ë{1âŒ¾((s|ğ•¨+rÃ—ğ•©)âŠ¸âŠ‘)sm}ËË˜inp}
    eins â‡ Q 100
    zwei â‡ âŠ‘â‹QÂ¨â†•â€¢math.LCMÂ´s
  }
  XIV _is 14
#+end_src

#+RESULTS:
: "Computed 229069152 and 7383 in 5.4615302822s"

** XV

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XV â† {
    ri â† âŠ‘/â—‹â¥ŠâŸœ(â†•â‰¢)'@'=âŠ‘wâ€¿m â† >âŠ¸â‹ˆâŸœâˆ¾Â´(âŠ¢âŠ”ËœÂ·+`âŸ¨âŸ©âŠ¸â‰¡Â¨)â€¢FLines Inputğ•©
    m{<Ë˜âŒ½â‰>"v^"â€¿"><"(-Ë=âŒœ)Â¨<ğ•©}â†©
    oid â† âˆ˜â€¿2â¥Š/â—‹â¥ŠâŸœ(â†•â‰¢) 'O'=wd â† (âŠ¢/Ëœ2Ã—1â¥ŠËœâ‰ )Ë˜w â‹„ ridâ€¿ridp â† /â—‹â¥ŠâŸœ(â†•â‰¢) '@'=wd
    wd '.'âŒ¾(ridpâŠ¸âŠ‘)â†© â‹„ {@ âŠ£ wd(']'âŒ¾(ğ•©âŠ¸âŠ‘)'['âŒ¾(ğ•¨âŠ¸âŠ‘))â†©}Â´Ë˜oid
    DFS â† {drğ•Šr:
      Step â† {
        '#'=wâŠ‘Ëœğ•©+dr ? 1;
        '['=wâŠ‘Ëœğ•©+dr ? ğ•Šğ•©+dr+0â€¿1 ? 1;
        ']'=wâŠ‘Ëœğ•©+dr ? ğ•Šğ•©+dr-0â€¿1 ? 1;
        âŠ‘"[O]"âˆŠËœwâŠ‘Ëœğ•©+dr ? ğ•Šğ•©+dr ? 1;
        0 âŠ£ w('.'âŒ¾(ğ•©âŠ¸âŠ‘)(ğ•©âŠ‘w)âŒ¾((ğ•©+dr)âŠ¸âŠ‘))â†©
      }
      cw â† w â‹„ Stepâ—¶{ğ•Š: ğ•©+dr}â€¿{ğ•Š: wâ†©cw â‹„ ğ•©} r
    }
    ri DFSÂ´m â‹„ eins â‡ +Â´â¥Š100â€¿1Ã—â‰1>/â—‹â¥ŠâŸœ(â†•â‰¢)'O'=w
    wâ†©wd â‹„ rid DFSÂ´m â‹„ zwei â‡ +Â´â¥Š100â€¿1Ã—â‰1>/â—‹â¥ŠâŸœ(â†•â‰¢)'['=w
  }
  XV _is 15
#+end_src

#+RESULTS:
: "Computed 1446158 and 1446175 in 0.0177348094s"

** XVI

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XVI â† {
    inf â† -2â‹†31 â‹„ râ€¿sâ€¿e â† âŸ¨'#'âŠ¸â‰ , 'S'âŠ¸=, 'E'âŠ¸=âŸ©{ğ•ğ•©}Â¨<inp â† >â€¢FLines Inputğ•©
    dij â† âŒŠÂ´âˆ˜{âŸ¨âŠ¢_cnu, 1âŠ¸âŒ½, 1âŠ¸âŒ½â¼, âŠ¢âŸ©{r<âŠ¸Ã—ğ•ğ•©}Â¨âŸ¨ğ•©+1, ğ•©+1e3, ğ•©+1e3, ğ•©âŸ©}_fp 0â€¿infâ€¿0â€¿0Ã—<s
    mnâ€¿mrâ€¿mrc â† râŠ¸âˆ§Â¨Â¨ {âŸ¨2âŠ¸âŒ½_cnuğ•©-1, 1âŒ½ğ•©-1e3, 1âŒ½â¼ğ•©-1e3âŸ©=<ğ•©}dij
    eins â‡ inf -Ëœ opt â† (âŒŠÂ´dij) âŠ‘ËœâŠ‘/â—‹â¥ŠâŸœ(â†•â‰¢)e
    zwei â‡ +Â´â¥Šâˆ¨Â´ âˆ¨Â´âˆ˜{âŸ¨mnâˆ§2âŠ¸âŒ½_cnuğ•©, mrâˆ§1âŒ½ğ•©, mrcâˆ§1âŒ½â¼ğ•©, ğ•©âŸ©}_fp e<âŠ¸âˆ§dij=opt
  }
  XVI _is 16
#+end_src

#+RESULTS:
: "Computed 99448 and 498 in 0.0625257885s"

#+begin_export html
<details>
<summary>Commentary</summary>
#+end_export

I dislike implementing graph algorithms with their messy, imperative solutions, side effects, and fancy data structures.
Usually, a problem like this is solved using Dijkstra's algorithm, but after days of implementing â€œFortranizedâ€ DFS and BFS,
I decided to borrow ideas from an expert array programmer's [[https://github.com/dzaima/aoc][solutions]] and rework mine into a more elegant, array-oriented style.
As a note to myself and anyone interested in learning the craft, I will describe how the above code works.

We start by parsing the map and getting boolean masks for the walls, start and end positions (=râ€¿sâ€¿e=). We then defined
a fixed point modifier =_fp=, and a motion modifier =_cnu=. The latter performs nudge operations on the array,
simulating cardinal coordinate steps up, left, down and right. By operating in the appropriate function,
we can take these steps in any order. In addition, we need the initial position to be =Â¯âˆ=,
but for efficient (and correct) arithmetic we define it as the minimum =i32= negative integer.

For part one, we start with four copies of the input array, all zeros except the second one which has the value =inf=
in the start's index. Those arrays correspond to the four directions. Then we apply the following procedure until
the input stabilizes:

1. Apply the four nudges with a cost of 1
2. Apply both clockwise and counterclockwise 90Â° rotations, each with a cost of 1e3,
   and select the minimal-cost configuration in each direction. A bit difficult to see, but this helped me understand it:
   
#+begin_src bqn :exports both
  >âŸ¨âŠ¢, 1âŠ¸âŒ½, 1âŠ¸âŒ½â¼, 2âŠ¸âŒ½âŸ© {ğ•ğ•©}âŒœ <âŸ¨Â»,Â»Ë˜,Â«,Â«Ë˜âŸ©
#+end_src

#+RESULTS:
: â”Œâ”€             
: â•µ Â»  Â»Ë˜ Â«  Â«Ë˜  
:   Â»Ë˜ Â«  Â«Ë˜ Â»   
:   Â«Ë˜ Â»  Â»Ë˜ Â«   
:   Â«  Â«Ë˜ Â»  Â»Ë˜  
:               â”˜

3. [@3] Combine these new states with the original input state, and mask them by the walls so only valid paths remain.
4. Take the minimal-cost state from each of the four directions.
5. Find the fixed point, the stable configuration with minimal cost. The minimum value at the end position across
   the four-direction array is the solution, offset by =inf=. In effect, we have implemented a variant of
   Dijkstraâ€™s algorithm purely with array operations and functional transformations,
   without explicit loops or priority queues.

Some important remarks:

- At any given point, the shortest path to a particular tile may arrive from a different orientation than
  previously considered. Minimizing across the four directional arrays at each step ensures that one consistently
  chooses the lowest possible cost for each position, no matter how it is reached.
- Once reached the fixed point, the four orientation-based configurations represent stable minimal costs
  for approaching each tile from each direction. The final step is to minimize across all four directional
  costs for the end tile to get the absolute minimal cost path.

For part two, we already know the minimal costs and directions for every tile, so we now want to find
which tiles lie on at least one best path. To do this, we trace the solution backward from the end tile.
First, we consider the inverse of our forward steps and rotations: we look at moving backwards and applying
inverse rotations, which are identical for 90Â° turns since they are their own inverses.

Using the final minimal cost configuration, we create masks indicating which tiles, if we moved from them in reverse,
would correctly reproduce the forward cost offsets. We still apply the walls mask to avoid invalid positions.
Starting with an array initialized such that only the end tile (in the appropriate direction) and
with optimal value is marked, we propagate backwards, selecting tiles that could have led to the minimal
cost at the end. This backward propagation continues until it stabilizes, reaching a new fixed point.
At the end, we have identified all tiles that are part of at least one best path.

#+begin_export html
</details>
#+end_export

** XVII

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XVII â† {
    inp â† 3(â†‘â‹ˆâˆ˜â€¿2â¥Šâ†“)âˆ¾âŸ¨âŸ©âŠ¸IntsÂ¨â€¢FLines Inputğ•©
    M â† {rğ•Šp:
      Cmb â† {ğ•©â‰¤3? ğ•©; râŠ‘Ëœğ•©-4}
      outâ†âŸ¨âŸ© â‹„ out âŠ£ {
        0â€¿opğ•Špc: argâ†Cmb op â‹„ r(âŒŠ(âŠ‘r)Ã·2â‹†arg)âŒ¾âŠ‘â†© â‹„ pc+1;
        1â€¿opğ•Špc: r(op Xor âŠ¢)âŒ¾(1âŠ¸âŠ‘)â†© â‹„ pc+1;
        2â€¿opğ•Špc: argâ†Cmb op â‹„ r(8|arg)âŒ¾(1âŠ¸âŠ‘)â†© â‹„ pc+1;
        3â€¿opğ•Špc: 0â‰ â—¶(pc+1)â€¿op âŠ‘r;
        4â€¿Â·ğ•Špc:  r((2âŠ‘r)XorâŠ¢)âŒ¾(1âŠ¸âŠ‘)â†© â‹„ pc+1;
        5â€¿opğ•Špc: outâˆ¾â†©8|Cmb op â‹„ pc+1;
        6â€¿opğ•Špc: argâ†Cmb op â‹„ r(âŒŠ(âŠ‘r)Ã·2â‹†arg)âŒ¾(1âŠ¸âŠ‘)â†© â‹„ pc+1;
        7â€¿opğ•Špc: argâ†Cmb op â‹„ r(âŒŠ(âŠ‘r)Ã·2â‹†arg)âŒ¾(2âŠ¸âŠ‘)â†© â‹„ pc+1
      }Â´âˆ˜{ğ•©â‹ˆËœğ•©âŠp}â€¢_while_{ğ•Š: ğ•©â‰ â‰ p}0
    }
    Q â† {
      Â·â€¿bâ€¿c â† âŠ‘râ€¿p â† ğ•©
      {(â¥Šp) â‰¡ ğ•©â€¿bâ€¿c M p ? ğ•©;
       (0=ğ•¨) âˆ¨ ((-ğ•¨)â†‘â¥Šp) â‰¡ ğ•©â€¿bâ€¿c M p ? âŒŠÂ´(<ğ•¨)ğ•Š{(ğ•¨+1)ğ”½ğ•©+8Ã—ğ•˜}ğ•©Â¨âŠ’Ëœp;âˆ}Â´0â€¿0
    }
    eins â‡ 1â†“âˆ¾','âŠ¸âˆ¾Â¨('0'-@)+@+MÂ´inp
    zwei â‡ Q inp
  }
  XVII _is 17
#+end_src

#+RESULTS:
: "Computed ""2,0,1,3,4,0,2,1,7"" and 236580836040301 in 0.0570494434s"

** XVIII

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XVIII â† {
    n â† 70 â‹„ inp â† >âŸ¨âŸ©âŠ¸IntsÂ¨â€¢FLines Inputğ•©
    g â† 1âŒ¾âŠ‘0Â¨ b â† (1â¥ŠËœ1+nâ€¿n) {0âŒ¾(ğ•¨âŠ¸âŠ‘)ğ•©}Â´<Ë˜1024â†‘inp
    _sym â† {Ms _ğ•£ğ•©: âŠ‘{(ğ•¨+1)â‹ˆmsâˆ§âˆ¨Â´âŠ¢_cnuâŠ¸âˆ¾<ğ•©}Â´â€¢_while_{ğ•Š: Â¬âŠ¢Â´âŠ¢ËâŠ¢Â´ğ•©} 0â€¿ğ•©}
    _symv â† {Ms _ğ•£ğ•©: âŠ¢Â´âŠ¢Ë{msâˆ§âˆ¨Â´âŠ¢_cnuâŠ¸âˆ¾<ğ•©}_fpğ•©}
    eins â‡ b _sym g
    zwei â‡ inpâŠËœâŠ‘{ğ•Šlâ€¿r:
      âŸ¨lâ€¿m,mâ€¿râŸ©âŠ‘Ëœ{siâ†<Ë˜ğ•©â†‘inp â‹„ (0Â¨âŒ¾(siâŠ¸âŠ‘)b)_symv g}m â† âŒŠ2Ã·Ëœ+Â´ğ•©
    }_fp 1024â‹ˆâ‰ inp
  }
  XVIII _is 18
#+end_src

#+RESULTS:
: "Computed 248 and âŸ¨ 32 55 âŸ© in 0.0038696174s"

** XIX

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XIX â† {
    pâ€¿d â† (1âŠ¸â†‘â‹ˆ2âŠ¸â†“) â€¢FLines Inputğ•©
    dp â† â€¢HashMapËœâŸ¨âŸ© â‹„ p(','âŠ¸â‰¢Â¨âŠ¸/Â¨Â·' 'âŠ¸Splitâˆ¾)â†©
    C â† {
      dp.Has ğ•© ? dp.Get ğ•©;
      ğ•©{ğ•©âŠ£ğ•¨dp.Setğ•©}(ğ•©â‰¡âŸ¨âŸ©)âˆ¨+Â´pğ•Š{hâ€¿hsâ†ğ•¨(â†‘â‹ˆâ†“)Ëœâ‰ ğ•© â‹„ hâ‰¡ğ•© ? ğ”½hs; 0}Â¨Ëœ<ğ•©
    }
    zweiâ€¿eins â‡ (+Â´â‹ˆÂ·+Â´0âŠ¸â‰ )CÂ¨d
  }
  XIX _is 19
#+end_src

#+RESULTS:
: "Computed 285 and 636483903099279 in 0.4877095598s"

** XX

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XX â† {
    râ€¿s â† âŸ¨'#'âŠ¸â‰ , 'S'âŠ¸=âŸ©{ğ•ğ•©}Â¨<inp â† >â€¢FLines Inputğ•©
    Sym â† {msğ•Šğ•©: sâ†ğ•©
      s(âŠ¢â‹ˆâŠ‘Ëœ)/â—‹â¥ŠâŸœ(â†•â‰¢){{s+â†©ğ•©â‹„ğ•©}msâˆ§âˆ¨Â´âŠ¢_cnuâŠ¸âˆ¾<ğ•©}_fpğ•©
    }
    diff â† (-âŒœËœctn)-mh â† (+Â´|âˆ˜-)âŒœËœâŠ‘pthâ€¿ctn â† r Sym s
    einsâ€¿zwei â‡ +Â´Â¨âŸ¨mh=2, mhâ‰¤20âŸ©{â¥Š100â‰¤ğ•¨Ã—ğ•©}Â¨<diff
  }
  XX _is 20
#+end_src

#+RESULTS:
: "Computed 1463 and 985332 in 2.9748486369s"

** XXI

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XXI â† {
    inp â† â€¢FLines Inputğ•©
    kbs â† ["789","456","123"," 0A"]â€¿[" ^A","<v>"] â‹„ dp â† â€¢HashMapËœâŸ¨âŸ©
    F â† {
      >Â´1â†“ğ•© ? â‰ âŠ‘ğ•©; dp.Has ğ•© ? dp.Get ğ•©;
      ğ•Šsâ€¿kâ€¿r:
      ğ•©{ğ•©âŠ£ğ•¨dp.Setğ•©}âŠ‘+Ë{
        pâ€¿qâ€¿nl â† (ğ•©âˆ¾' ')(âŠ‘=/â—‹â¥ŠÂ·â†•âˆ˜â‰¢âŠ¢)Â¨<â‰kbsâŠ‘Ëœk>0
        FâŸ¨'A'âˆ¾Ëœ{0â‰ +Â´Ã—âŸœâŒ½Ëqâ€¿p>âˆ˜=<nl?âŒ½ğ•©;ğ•©}"<v^>"/Ëœ0âŒˆâˆ¾Â¯1â€¿1âŠ¸Ã—Â¨â‹ˆâŸœâŒ½q-p, k+1, râŸ©
      }Ë˜2â†•'A'âˆ¾s
    }
    einsâ€¿zwei â‡ 2â€¿25 {+Â´ğ•¨{(â€¢ParseFloat 3â†‘ğ•©)Ã—Fğ•©â€¿0â€¿ğ•¨}Â¨ğ•©}âŒœ <inp
  }
  XXI _is 21
#+end_src

#+RESULTS:
: "Computed 246990 and 306335137543664 in 0.0011588057s"

** XXII

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XXII â† {
    dp â† â€¢HashMapËœâŸ¨âŸ© â‹„ inp â† â€¢ParseFloatÂ¨ â€¢FLines Inputğ•©
    Ev â† {{16777216|ğ•©Xorğ•ğ•©}Â´âŸ¨2048Ã—âŠ¢, âŒŠ32Ã·ËœâŠ¢, 64Ã—âŠ¢, ğ•©âŸ©}
    Ctn â† {ğ•©dp.Setğ•¨+dp.GetâŠ0ğ•©}
    {ğ•©{@âŠ£(4â†“ğ•¨) âŠ‘âŠ¸CtnË˜â—‹((âˆŠw)âŠ¸/)wâ†4â†•ğ•©}Â¨{-Â´Ë˜2â†•ğ•©}Â¨ğ•©} 10|sn â† EvâŸ(â†•2001)Â¨ inp
    eins â‡ +Â´âŠ¢Â´Â¨sn
    zwei â‡ âŒˆÂ´dp.Values@
  }
  XXII _is 22
#+end_src

#+RESULTS:
: "Computed 18317943467 and 2018 in 2.4735878518s"

** XXIII

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XXIII â† {
    pâ€¿c â† (âŠ¢â‹ˆÂ·â·âˆ¾)'-'âŠ¸SplitÂ¨â€¢FLines Inputğ•©
    m â† +Ëâˆ˜Ã—â‰1â€¿âˆËœâŠ¸Ã—(âŒ½Â¨âŠ¸âˆ¾p)âˆŠËœâ‹ˆâŒœËœc
    eins â‡ (2Ã·Ëœ+Â´â¥Štm)-+Â´â¥ŠÃ—tmâ†m/Ëœ('t'=âŠ‘)Â¨c
    zwei â‡ 1â†“âˆ¾','âŠ¸âˆ¾Â¨âˆ§c/ËœâŒˆÂ´âŠ¸=âŒˆË+Ëâˆ˜Ã—â‰1â€¿âˆËœâŠ¸Ã—m
  }
  XXIII _is 23
#+end_src

#+RESULTS:
: "Computed 1139 and ""aw,fk,gv,hi,hp,ip,jy,kc,lk,og,pj,re,sr"" in 0.2091337031s"

** XXIV

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XXIV â† {
    gsâ€¿os â† (âŠ¢âŠ”ËœÂ·+`âŸ¨âŸ©âŠ¸â‰¡Â¨)â€¢FLines Inputğ•©
    op â† "AND"â€¿"OR"â€¿"XOR"â€¢HashMap "âˆ§"â€¿"âˆ¨"â€¿"â‰ " â‹„ os 1âŠ¸â†“â†©
    TS â† {{ğ•ŠâŸ(ğ•©<â—‹â‰ âŠ¢)âŸœ(ğ•©âˆ¾Â·/ğ•¨âŠ¸<)ğ•¨âˆ¨âˆ§Â´âˆ˜âŠâŸœğ•¨Â¨p}âŸœ/0Â¨pâ†ğ•©}
    tsn â† (3âŠ¸â†‘Â¨gs)âˆ¾âŠ‘Â¨urd â† {aâ€¿oâ€¿bâ€¿Â·â€¿râ†' 'Splitğ•© â‹„ âŸ¨r, aâ€¿bâŸ©}Â¨os
    ord â† (â‰ gs)(â†“-âŠ£)TS(âŸ¨âŸ¨âŸ©âŸ©â¥ŠËœâ‰ gs)âˆ¾(tsnâŠ¸âŠâŠ¢Â´)Â¨urd
    defs â† {'â†'Â¨âŒ¾((ğ•©=':')âŠ¸/)ğ•©}Â¨gs
    dos â† ordâŠ{aâ€¿oâ€¿bâ€¿Â·â€¿râ†' 'Splitğ•© â‹„ do â† op.Get o â‹„ âˆ¾Â´râ€¿'â†'â€¿aâ€¿doâ€¿b}Â¨os
    eins â‡ +Â´(âŠ¢Ã—2â‹†â†•âˆ˜â‰ )â€¢BQN(âˆ¾'â‹„'âŠ¸âˆ¾Â¨defsâˆ¾dos)âˆ¾'â‹„'âˆ¾1â†“âˆ¾'â€¿'âŠ¸âˆ¾Â¨(âŠ¢âˆ¾ËœÂ·1âŠ¸=â—¶"z"â€¿"z0"â‰ )Â¨â€¢FmtÂ¨â†•46
    zwei â‡ "cqm,mps,vcv,vjv,vwp,z13,z19,z25" # Graphviz
   }
   XXIV _is 24
 #+end_src

 #+RESULTS:
 : "Computed 42410633905894 and ""cqm,mps,vcv,vjv,vwp,z13,z19,z25"" in 0.0021468518s"

** XXV

#+begin_src bqn :tangle ./bqn/aoc24.bqn :exports both
  XXV â† {
    inp â† >Â¨âŸ¨âŸ©SplitFâ€¢FLines Inputğ•©
    eins â‡ 2Ã·Ëœ+Â´â¥Š{Â¬âˆ¨Â´âˆ¨Ë1<+Â´'#'=ğ•¨â€¿ğ•©}âŒœËœinp
    zwei â‡ "All done!"
  }
  XXV _is 25
#+end_src

#+RESULTS:
: "Computed 3397 and ""All done!"" in 0.0430929714s"

#+BEGIN_EXPORT html
  <div style="text-align: center; font-size: 2em; padding: 20px 0;">
    <a href="https://panadestein.github.io/blog/" style="text-decoration: none;">âŠ‘âˆ˜âˆ</a>
  </div>
#+END_EXPORT
